<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YouToFlix Admin Panel</title>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <style>
    :root {
      --primary: #c00;
      --primary-hover: #a00;
      --success: #28a745;
      --danger: #e74c3c;
      --danger-hover: #c0392b;
      --bg: #f4f4f4;
      --white: #ffffff;
      --gray: #e9ecef;
      --light-blue: #fbecec;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: var(--bg);
      color: #333;
    }
    .password-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:1000;transition:opacity .3s ease}.password-modal{background:var(--white);padding:2rem;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,.2);width:90%;max-width:400px;text-align:center;transform:scale(.9);transition:transform .3s ease}.password-modal h2{margin-top:0;margin-bottom:1rem;color:var(--primary)}.password-modal p{margin-bottom:1.5rem;color:#666}.password-input{width:100%;padding:.8rem;font-size:1rem;border:2px solid #ccc;border-radius:5px;margin-bottom:.5rem;transition:border-color .2s}.password-input:focus{border-color:var(--primary);outline:none}.password-input.error{border-color:var(--danger)}.password-error-msg{color:var(--danger);text-align:left;height:1.2rem;font-size:.9rem;margin-bottom:1rem}.login-btn{width:100%;padding:.8rem;background-color:var(--primary);color:white;border:none;border-radius:5px;font-size:1.1rem;cursor:pointer;transition:background-color .2s}.login-btn:hover{background-color:var(--primary-hover)}
    .notification{position:fixed;top:20px;left:50%;transform:translateX(-50%);background-color:var(--success);color:white;padding:1rem 1.5rem;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.15);z-index:1001;opacity:0;transition:opacity .3s ease,top .3s ease}.notification.error{background-color:var(--danger)}.notification.show{opacity:1;top:30px}
    .hidden-content{display:none}
    .container{max-width:950px;margin:auto;background:var(--white);padding:1.5rem;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    h1{text-align:center;color:var(--primary);font-size:2rem;margin-bottom:1rem}
    form{display:flex;flex-direction:column;gap:1rem;padding-bottom:1.5rem;border-bottom:2px solid var(--gray)}
    label{font-weight:600}
    input, select { padding: 0.6rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 5px; width: 100%; }
    #title { background-color: #f8f9fa; color: #555; }
    
    /* --- ‡¶®‡¶§‡ßÅ‡¶® CSS: ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø --- */
    select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 0.7rem 2.5rem 0.7rem 1rem;
      font-size: 1rem;
      color: #333;
      cursor: pointer;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 0.7rem center;
      background-size: 1.2em;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    select:hover {
        border-color: #aaa;
    }
    select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(204, 0, 0, 0.15);
    }
    #filterCategory {
        background-color: var(--light-blue);
        font-weight: 500;
    }
    /* --- ‡¶®‡¶§‡ßÅ‡¶® CSS ‡¶∂‡ßá‡¶∑ --- */

    button[type="submit"]{background-color:var(--primary);color:white;font-size:1rem;padding:.8rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .2s}
    button[type="submit"]:hover{background-color:var(--primary-hover)}
    .filter-container{margin-top:1.5rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
    table{width:100%;border-collapse:collapse;margin-top:1rem}
    th,td{padding:.75rem;text-align:left;border-bottom:1px solid #ddd;vertical-align:middle}
    th{background-color:var(--light-blue)}
    th:nth-child(1),td:nth-child(1){width:130px}
    th:nth-child(2),td:nth-child(2){width:150px}
    th:nth-child(3),td:nth-child(3){width:auto} /* Title column width */
    th:nth-child(4),td:nth-child(4){width:100px;text-align:center}
    td{word-break:break-all}
    .thumbnail-img{width:120px;height:70px;object-fit:cover;border-radius:5px}
    .action-btn-wrapper{display:flex;gap:8px;justify-content:center;align-items:center}
    .action-btn{border:none;width:36px;height:36px;border-radius:50%;cursor:pointer;font-size:1.1rem;transition:background-color .2s,transform .2s;display:flex;align-items:center;justify-content:center;text-decoration:none;color:white}
    .action-btn:hover{transform:scale(1.1)}
    .delete-btn{background-color:var(--danger)}.delete-btn:hover{background-color:var(--danger-hover)}
    #title-loader { display: none; margin-left: 10px; border: 2px solid #f3f3f3; border-top: 2px solid var(--primary); border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .title-wrapper { display: flex; align-items: center; }

    @media (max-width:768px){.container{padding:1rem}thead{display:none}tr{display:block;margin-bottom:1rem;border:1px solid #ddd;border-radius:8px;padding:1rem}td{display:block;text-align:right;border-bottom:1px dashed #eee;padding-left:50%;position:relative}td:last-child{border-bottom:none}td::before{content:attr(data-label);position:absolute;left:.75rem;width:calc(50% - 1.5rem);text-align:left;font-weight:bold;color:var(--primary)}td:nth-child(4){text-align:right}.action-btn-wrapper{justify-content:flex-end}}
  </style>
</head>
<body>

  <div id="passwordModalOverlay" class="password-modal-overlay">
    <div id="passwordModal" class="password-modal">
      <h2>üîê ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶®</h2>
      <p>‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®‡•§</p>
      <form id="loginForm" onsubmit="return false;">
        <input type="password" id="passwordInput" class="password-input" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...">
        <div id="passwordError" class="password-error-msg"></div>
        <button type="submit" class="login-btn">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      </form>
    </div>
  </div>

  <div id="adminPanel" class="container hidden-content">
    <h1>üì• YouToFlix ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h1>
    <form id="videoForm">
      <div>
        <label for="category">üìÇ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø:</label>
        <select id="category" required>
            <option value="">-- ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
            <option value="Hollywood">Hollywood</option>
            <option value="Bollywood">Bollywood</option>
            <option value="Tollywood">Tollywood</option>
            <option value="Dhallywood">Dhallywood</option>
            <option value="Kollywood">Kollywood</option>
            <option value="Mollywood">Mollywood</option>
            <option value="Lollywood">Lollywood</option>
            <option value="Chinawood">Chinawood</option>
            <option value="Nollywood">Nollywood</option>
            <option value="K-Cinema">K-Cinema</option>
            <option value="Turkish Cinema">Turkish Cinema</option>
            <option value="Bangla Drama">Bangla Drama</option>
            <option value="Urdu Drama">Urdu Drama</option>
            <option value="Hindi Drama">Hindi Drama</option>
            <option value="Turki Drama">Turkish Drama</option>
            <option value="Bangla Carton">Bangla Carton</option>
            <option value="Hindi Carton">Hindi Carton</option>
            <option value="English Carton">English Carton</option>
            <option value="Bangla Explanation">Bangla Explanation</option>
            <option value="Hindi Explanation">Hindi Explanation</option>
        </select>
      </div>
      <div>
        <label for="videoLink">üîó ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï:</label>
        <input type="url" id="videoLink" placeholder="https://www.youtube.com/watch?v=..." required />
      </div>
      <div>
        <label for="title">üñãÔ∏è ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ (‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü):</label>
        <div class="title-wrapper">
          <input type="text" id="title" placeholder="‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶Ü‡¶∏‡¶¨‡ßá..." readonly required />
          <div id="title-loader"></div>
        </div>
      </div>
      <button type="submit">‚ûï ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </form>
    <div class="filter-container">
        <label for="filterCategory">üîé ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
        <select id="filterCategory">
            <option value="All">‡¶∏‡¶ï‡¶≤ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</option>
            <option value="Hollywood">Hollywood</option>
            <option value="Bollywood">Bollywood</option>
            <option value="Tollywood">Tollywood</option>
            <option value="Dhallywood">Dhallywood</option>
            <option value="Kollywood">Kollywood</option>
            <option value="Mollywood">Mollywood</option>
            <option value="Lollywood">Lollywood</option>
            <option value="Chinawood">Chinawood</option>
            <option value="Nollywood">Nollywood</option>
            <option value="K-Cinema">K-Cinema</option>
            <option value="Turkish Cinema">Turkish Cinema</option>
            <option value="Bangla Drama">Bangla Drama</option>
            <option value="Urdu Drama">Urdu Drama</option>
            <option value="Hindi Drama">Hindi Drama</option>
            <option value="Turki Drama">Turkish Drama</option>
            <option value="Bangla Carton">Bangla Carton</option>
            <option value="Hindi Carton">Hindi Carton</option>
            <option value="English Carton">English Carton</option>
            <option value="Bangla Explanation">Bangla Explanation</option>
            <option value="Hindi Explanation">Hindi Explanation</option>
        </select>
    </div>
    <table id="videoTable">
      <thead>
        <tr>
          <th>‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤</th>
          <th>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</th>
          <th>‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤</th>
          <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    // --- Password Protection & Notification Scripts (Unchanged) ---
    document.addEventListener("DOMContentLoaded",()=>{const e="mdfarukso123@admin",t=5;let o=0;const a=document.getElementById("passwordModalOverlay"),s=document.getElementById("passwordModal"),d=document.getElementById("loginForm"),l=document.getElementById("passwordInput"),n=document.getElementById("passwordError"),c=document.getElementById("adminPanel");setTimeout(()=>{s.style.transform="scale(1)"},50),d.addEventListener("submit",i=>{i.preventDefault();const r=l.value;r===e?(a.style.opacity="0",setTimeout(()=>{a.style.display="none"},300),c.classList.remove("hidden-content"),showNotification("‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!","success"),filterAndRender()):(o++,l.classList.add("error"),l.value="",o>=t?s.innerHTML=`\n                        <h2 style="color: var(--danger);">‚õîÔ∏è ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶≤‡¶ï!</h2>\n                        <p>‡¶Ü‡¶™‡¶®‡¶ø ${t} ‡¶¨‡¶æ‡¶∞ ‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶è‡¶ñ‡¶® ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡ßü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</p>\n                    `:(n.textContent=`‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°‡•§ ${t-o} ‡¶ü‡¶ø ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶Ü‡¶õ‡ßá‡•§`,setTimeout(()=>{l.classList.remove("error")},2e3)))})});function showNotification(e,t="success"){const o=document.createElement("div");o.className=`notification ${t}`,o.textContent=e,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>{o.remove()},300)},3e3)}

    // --- Firebase and App logic ---
    const firebaseConfig = {
      apiKey: "AIzaSyD6y6DjbCt9qUMKNZ1oIZYHWAUoishDK4Q",
      authDomain: "youtoflix-2e613.firebaseapp.com",
      databaseURL: "https://youtoflix-2e613-default-rtdb.firebaseio.com",
      projectId: "youtoflix-2e613",
      storageBucket: "youtoflix-2e613.firebasestorage.app",
      messagingSenderId: "1021832895783",
      appId: "1:1021832895783:web:6bede10ea3e5c2d2505d02"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const form = document.getElementById("videoForm");
    const categorySelect = document.getElementById("category");
    const videoLinkInput = document.getElementById("videoLink");
    const titleInput = document.getElementById("title");
    const titleLoader = document.getElementById("title-loader");
    const tableBody = document.querySelector("#videoTable tbody");
    const filterSelect = document.getElementById("filterCategory");
    let allVideos = [];
    let currentFilter = 'All';

    function getYoutubeVideoId(url) {
        try {
            if (url.includes('youtube.com/watch?v=')) return new URL(url).searchParams.get('v');
            if (url.includes('youtu.be/')) return new URL(url).pathname.substring(1).split('?')[0];
        } catch(e) { console.error("Invalid URL"); }
        return null;
    }

    videoLinkInput.addEventListener('blur', async () => {
        const link = videoLinkInput.value.trim();
        if (!link) return;

        const videoId = getYoutubeVideoId(link);
        if (!videoId) {
            showNotification("‡¶∏‡¶†‡¶ø‡¶ï ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§", "error");
            return;
        }
        
        titleLoader.style.display = 'inline-block';
        titleInput.value = "";
        try {
            const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(`https://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=${videoId}&format=json`)}`);
            const data = await response.json();
            const youtubeData = JSON.parse(data.contents);
            if (youtubeData.title) {
                titleInput.value = youtubeData.title;
            } else {
                 showNotification("‡¶è‡¶á ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§", "error");
            }
        } catch (error) {
            console.error("Error fetching video title:", error);
            showNotification("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶Ü‡¶®‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§", "error");
        } finally {
            titleLoader.style.display = 'none';
        }
    });

    function renderTable(videosToRender) {
        tableBody.innerHTML = "";
        if (!videosToRender || videosToRender.length === 0) return;
        videosToRender.forEach((video) => {
            const videoId = getYoutubeVideoId(video.link);
            const row = document.createElement("tr");
            row.innerHTML = `
                <td data-label="‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤"><img src="https://img.youtube.com/vi/${videoId}/mqdefault.jpg" alt="Thumbnail" class="thumbnail-img"></td>
                <td data-label="‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø">${video.category}</td>
                <td data-label="‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">${video.title}</td>
                <td data-label="‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®">
                    <div class="action-btn-wrapper">
                        <button class="action-btn delete-btn" onclick="deleteVideo('${video.id}')" title="‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®">üóëÔ∏è</button>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    function filterAndRender() {
        const videos = currentFilter === 'All' ? allVideos : allVideos.filter(video => video.category === currentFilter);
        renderTable(videos);
    }
    
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const category = categorySelect.value;
      const link = videoLinkInput.value.trim();
      const title = titleInput.value.trim();

      if (!category || !link || !title) {
          showNotification("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶ï‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", "error");
          return;
      }

      const videosRef = db.ref("videos");
      videosRef.orderByChild('link').equalTo(link).once('value')
        .then((snapshot) => {
            if (snapshot.exists()) {
                showNotification("‡¶è‡¶á ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá‡•§", "error");
            } else {
                const newVideoRef = videosRef.push();
                newVideoRef.set({ 
                    category: category, 
                    link: link, 
                    title: title,
                    loves: 0,
                    uploadDate: new Date().toISOString()
                });

                // --- ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ---
                const lastSelectedCategory = categorySelect.value; // ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                showNotification("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá!", "success");
                form.reset(); // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶π‡¶¨‡ßá)
                categorySelect.value = lastSelectedCategory; // ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø‡¶ü‡¶ø ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶®
                // --- ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∂‡ßá‡¶∑ ---
            }
        })
        .catch((error) => {
            console.error("‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:", error);
            showNotification("‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§", "error");
        });
    });

    function deleteVideo(id) {
        if(confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶á ‡¶è‡¶á ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
            db.ref("videos/" + id).remove()
              .then(() => showNotification("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§", "success"))
              .catch(() => showNotification("‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§", "error"));
        }
    }

    filterSelect.addEventListener('change', (e) => {
        currentFilter = e.target.value;
        filterAndRender();
    });
    
    db.ref("videos").on("value", (snapshot) => {
        allVideos = [];
        if(snapshot.exists()){
            snapshot.forEach((child) => {
                allVideos.push({ id: child.key, ...child.val() });
            });
        }
        allVideos.reverse();
        if (!document.getElementById("adminPanel").classList.contains('hidden-content')) {
           filterAndRender();
        }
    });
  </script>

</body>
</html>
